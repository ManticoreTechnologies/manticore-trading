<!DOCTYPE html>
<html>
<head>
    <title>Manticore Trading API Documentation</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        .endpoint {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 4px 4px 0;
        }
        .method {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            margin-right: 10px;
        }
        .get { background: #61affe; color: white; }
        .post { background: #49cc90; color: white; }
        .delete { background: #f93e3e; color: white; }
        .ws { background: #9069cd; color: white; }
        .path {
            font-family: monospace;
            font-size: 1.1em;
            color: #3498db;
        }
        .params {
            margin-left: 20px;
        }
        .param-name {
            font-family: monospace;
            color: #e83e8c;
        }
        .param-type {
            color: #6c757d;
            font-style: italic;
        }
        .response {
            background: #edf2f7;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        code {
            background: #272822;
            color: #f8f8f2;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
        }
        pre {
            background: #272822;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .section-nav {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin: 20px 0;
        }
        .section-nav ul {
            list-style-type: none;
            padding: 0;
        }
        .section-nav li {
            margin: 5px 0;
        }
        .section-nav a {
            color: #3498db;
            text-decoration: none;
        }
        .section-nav a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>Manticore Trading API Documentation</h1>

    <div class="section-nav">
        <h3>Quick Navigation</h3>
        <ul>
            <li><a href="#listings">Listings Endpoints</a></li>
            <li><a href="#orders">Order Endpoints</a></li>
            <li><a href="#market">Market Data Endpoints</a></li>
            <li><a href="#system">System Endpoints</a></li>
            <li><a href="#websockets">WebSocket Endpoints</a></li>
            <li><a href="#notifications">Notification Endpoints</a></li>
        </ul>
    </div>

    <h2 id="listings">Listings Endpoints</h2>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/listings/</span>
        <p>Get all listings with pagination</p>
        <div class="params">
            <h4>Query Parameters:</h4>
            <ul>
                <li><span class="param-name">per_page</span> <span class="param-type">(integer, default: 50)</span>: Number of results per page</li>
                <li><span class="param-name">page</span> <span class="param-type">(integer, default: 1)</span>: Page number</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/listings/search</span>
        <p>Search listings with various filters</p>
        <div class="params">
            <h4>Query Parameters:</h4>
            <ul>
                <li><span class="param-name">search_term</span> <span class="param-type">(string, optional)</span>: Text to search in name/description</li>
                <li><span class="param-name">seller_address</span> <span class="param-type">(string, optional)</span>: Filter by seller address</li>
                <li><span class="param-name">asset_name</span> <span class="param-type">(string, optional)</span>: Filter by asset name</li>
                <li><span class="param-name">min_price_evr</span> <span class="param-type">(decimal, optional)</span>: Minimum price in EVR</li>
                <li><span class="param-name">max_price_evr</span> <span class="param-type">(decimal, optional)</span>: Maximum price in EVR</li>
                <li><span class="param-name">status</span> <span class="param-type">(string, optional)</span>: Filter by listing status</li>
                <li><span class="param-name">tags</span> <span class="param-type">(array of strings, optional)</span>: Filter by tags</li>
                <li><span class="param-name">per_page</span> <span class="param-type">(integer, default: 50)</span>: Number of results per page</li>
                <li><span class="param-name">page</span> <span class="param-type">(integer, default: 1)</span>: Page number</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/listings/by-id/{listing_id}</span>
        <p>Get a specific listing by ID</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">listing_id</span> <span class="param-type">(string)</span>: The listing's UUID</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/listings/by-deposit-address/{deposit_address}</span>
        <p>Get a listing by deposit address</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">deposit_address</span> <span class="param-type">(string)</span>: The listing's deposit address</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/listings/by-seller-address/{seller_address}</span>
        <p>Get listings by seller address</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">seller_address</span> <span class="param-type">(string)</span>: The seller's address</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/listings/by-asset-name/{asset_name}</span>
        <p>Get listings by asset name</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">asset_name</span> <span class="param-type">(string)</span>: The asset name</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/listings/by-tag/{tag}</span>
        <p>Get listings by tag</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">tag</span> <span class="param-type">(string)</span>: The tag to filter by</li>
            </ul>
            <h4>Query Parameters:</h4>
            <ul>
                <li><span class="param-name">per_page</span> <span class="param-type">(integer, default: 50)</span>: Number of results per page</li>
                <li><span class="param-name">page</span> <span class="param-type">(integer, default: 1)</span>: Page number</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method post">POST</span>
        <span class="path">/listings/</span>
        <p>Create a new listing</p>
        <div class="params">
            <h4>Request Body:</h4>
            <pre>
{
    "seller_address": "string",
    "name": "string",
    "description": "string (optional)",
    "image_ipfs_hash": "string (optional)",
    "prices": [
        {
            "asset_name": "string",
            "price_evr": "decimal (optional)",
            "price_asset_name": "string (optional)",
            "price_asset_amount": "decimal (optional)",
            "ipfs_hash": "string (optional)",
            "units": "integer (optional, default: 8)"
        }
    ],
    "tags": ["string"] (optional)
}</pre>
        </div>
    </div>

    <div class="endpoint">
        <span class="method post">POST</span>
        <span class="path">/listings/{listing_id}/withdraw</span>
        <p>Withdraw assets from a listing</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">listing_id</span> <span class="param-type">(string)</span>: The listing's UUID</li>
            </ul>
            <h4>Request Body:</h4>
            <pre>
{
    "asset_name": "string",
    "amount": "decimal",
    "to_address": "string"
}</pre>
        </div>
    </div>

    <div class="endpoint">
        <span class="method delete">DELETE</span>
        <span class="path">/listings/by-id/{listing_id}</span>
        <p>Delete a listing</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">listing_id</span> <span class="param-type">(string)</span>: The listing's UUID</li>
            </ul>
        </div>
    </div>

    <h2 id="orders">Order Endpoints</h2>

    <div class="endpoint">
        <span class="method post">POST</span>
        <span class="path">/orders/create/{listing_id}</span>
        <p>Create a new order for a listing</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">listing_id</span> <span class="param-type">(string)</span>: The listing's UUID</li>
            </ul>
            <h4>Request Body:</h4>
            <pre>
{
    "buyer_address": "string",
    "items": [
        {
            "asset_name": "string",
            "amount": "decimal"
        }
    ]
}</pre>
        </div>
    </div>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/orders/{order_id}</span>
        <p>Get order details</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">order_id</span> <span class="param-type">(string)</span>: The order's UUID</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/orders/{order_id}/balances</span>
        <p>Get order payment balances</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">order_id</span> <span class="param-type">(string)</span>: The order's UUID</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method post">POST</span>
        <span class="path">/orders/{order_id}/cancel</span>
        <p>Cancel an unfulfilled order</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">order_id</span> <span class="param-type">(string)</span>: The order's UUID</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/orders/{order_id}/history</span>
        <p>Get order history</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">order_id</span> <span class="param-type">(string)</span>: The order's UUID</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method post">POST</span>
        <span class="path">/orders/cart</span>
        <p>Create a cart order (multiple listings)</p>
        <div class="params">
            <h4>Request Body:</h4>
            <pre>
{
    "buyer_address": "string",
    "items": [
        {
            "listing_id": "string",
            "asset_name": "string",
            "amount": "decimal"
        }
    ]
}</pre>
        </div>
    </div>

    <h2 id="market">Market Data Endpoints</h2>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/market/stats</span>
        <p>Get market-wide statistics</p>
        <div class="params">
            <h4>Query Parameters:</h4>
            <ul>
                <li><span class="param-name">start_date</span> <span class="param-type">(datetime, optional)</span>: Start date for stats period</li>
                <li><span class="param-name">end_date</span> <span class="param-type">(datetime, optional)</span>: End date for stats period</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/market/trending</span>
        <p>Get trending items</p>
        <div class="params">
            <h4>Query Parameters:</h4>
            <ul>
                <li><span class="param-name">category</span> <span class="param-type">(string, optional)</span>: Filter by category</li>
                <li><span class="param-name">time_frame</span> <span class="param-type">(string, default: "24h")</span>: Time frame for trend calculation (24h/7d/30d)</li>
            </ul>
        </div>
    </div>

    <h2 id="system">System Endpoints</h2>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/system/health</span>
        <p>Get system health status</p>
    </div>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/system/limits</span>
        <p>Get current rate limits and usage</p>
    </div>

    <h2 id="websockets">WebSocket Endpoints</h2>

    <div class="endpoint">
        <span class="method ws">WS</span>
        <span class="path">/ws/ping</span>
        <p>Simple WebSocket endpoint for testing connectivity</p>
        <div class="params">
            <h4>Messages:</h4>
            <ul>
                <li>Send: <code>"ping"</code></li>
                <li>Receive: <code>"pong"</code></li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method ws">WS</span>
        <span class="path">/ws/listings</span>
        <p>WebSocket endpoint for real-time listings updates</p>
        <div class="params">
            <h4>Messages:</h4>
            <ul>
                <li>Receive Updates: 
                    <pre>
{
    "type": "update",
    "channel": "listings",
    "data": {
        // Listing data
    },
    "timestamp": "ISO-8601 timestamp"
}</pre>
                </li>
                <li>Receive Heartbeat: 
                    <pre>
{
    "type": "ping"
}</pre>
                </li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method ws">WS</span>
        <span class="path">/ws/orders</span>
        <p>WebSocket endpoint for real-time order updates</p>
        <div class="params">
            <h4>Messages:</h4>
            <ul>
                <li>Receive Updates: 
                    <pre>
{
    "type": "update",
    "channel": "orders",
    "data": {
        // Order data
    },
    "timestamp": "ISO-8601 timestamp"
}</pre>
                </li>
                <li>Receive Heartbeat: 
                    <pre>
{
    "type": "ping"
}</pre>
                </li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method ws">WS</span>
        <span class="path">/ws/market</span>
        <p>WebSocket endpoint for real-time market data updates</p>
        <div class="params">
            <h4>Messages:</h4>
            <ul>
                <li>Receive Updates: 
                    <pre>
{
    "type": "update",
    "channel": "market",
    "data": {
        // Market data
    },
    "timestamp": "ISO-8601 timestamp"
}</pre>
                </li>
                <li>Receive Heartbeat: 
                    <pre>
{
    "type": "ping"
}</pre>
                </li>
            </ul>
        </div>
    </div>

    <h2 id="notifications">Notification Endpoints</h2>

    <div class="endpoint">
        <span class="method post">POST</span>
        <span class="path">/notifications/settings</span>
        <p>Update notification settings</p>
        <div class="params">
            <h4>Request Body:</h4>
            <pre>
{
    "email_enabled": "boolean",
    "email_address": "string (optional)",
    "order_updates": "boolean",
    "listing_updates": "boolean",
    "price_alerts": "boolean"
}</pre>
        </div>
    </div>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/notifications/settings/{user_address}</span>
        <p>Get notification settings</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">user_address</span> <span class="param-type">(string)</span>: The user's address</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method get">GET</span>
        <span class="path">/notifications/unread/{user_address}</span>
        <p>Get unread notifications</p>
        <div class="params">
            <h4>Path Parameters:</h4>
            <ul>
                <li><span class="param-name">user_address</span> <span class="param-type">(string)</span>: The user's address</li>
            </ul>
            <h4>Query Parameters:</h4>
            <ul>
                <li><span class="param-name">limit</span> <span class="param-type">(integer, default: 50)</span>: Number of notifications to return</li>
                <li><span class="param-name">offset</span> <span class="param-type">(integer, default: 0)</span>: Number of notifications to skip</li>
            </ul>
        </div>
    </div>

    <div class="endpoint">
        <span class="method post">POST</span>
        <span class="path">/notifications/mark-read</span>
        <p>Mark notifications as read</p>
        <div class="params">
            <h4>Request Body:</h4>
            <pre>
{
    "user_address": "string",
    "notification_ids": ["string (UUID)"]
}</pre>
        </div>
    </div>

    <div class="endpoint">
        <span class="method ws">WS</span>
        <span class="path">/notifications/stream</span>
        <p>Real-time notification stream</p>
        <div class="params">
            <h4>Query Parameters:</h4>
            <ul>
                <li><span class="param-name">user_address</span> <span class="param-type">(string)</span>: The user's address</li>
            </ul>
        </div>
    </div>

</body>
</html>

